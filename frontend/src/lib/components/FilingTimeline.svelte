<script>import { tickerStore } from "$lib/stores/tickerStore"; $: filings = $tickerStore.selectedTickers.flatMap(ticker => { const tickerFilings = $tickerStore.filings[ticker.symbol] || []; return tickerFilings.map(filing => ({ ...filing, tickerSymbol: ticker.symbol, tickerName: ticker.name })); }).sort((a, b) => new Date(b.date) - new Date(a.date));</script>
<div><h2 class="text-xl font-bold mb-4">SEC Filings Timeline</h2>{#if $tickerStore.selectedTickers.length === 0}<div class="card bg-gray-50 text-center py-8 px-4"><h3 class="text-lg font-medium text-gray-700 mb-2">No Filings to Display</h3><p class="text-gray-500">Add stocks to your watchlist to see their SEC filings here.</p></div>{:else if filings.length === 0}<div class="card border border-gray-200"><p class="text-gray-500 text-center py-6">No SEC filings found for the selected tickers.</p></div>{:else}<div class="space-y-4">{#each filings as filing}<div class="card border border-gray-200 hover:shadow-md transition-shadow"><div class="flex items-start gap-3"><div class="flex-shrink-0"><div class="w-16 h-16 flex items-center justify-center rounded bg-gray-100 text-gray-800 font-bold border border-gray-200">{filing.tickerSymbol}</div></div><div class="flex-grow"><div class="flex justify-between items-start"><div><span class="text-xs font-medium px-2 py-1 rounded-full bg-blue-100 text-blue-800">{filing.type}</span><span class="text-sm text-gray-500 ml-2">{filing.date}</span></div></div><h4 class="font-medium mt-2">{filing.tickerName}: {filing.title}</h4><p class="text-gray-600 mt-2 text-sm">{filing.summary}</p></div></div></div>{/each}</div>{/if}</div>
